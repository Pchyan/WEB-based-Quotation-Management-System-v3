# 報價管理系統

這是一個基於 Web 的報價管理系統，專為企業提供全面的客戶、產品和報價管理解決方案。系統包含用戶權限管理、客戶資訊管理、產品目錄管理、報價單生成以及資料庫備份等功能。

## 系統特點

- **多用戶權限管理**：完整的權限控制，支援管理員和使用者角色區分
- **客戶管理**：詳細的客戶資訊記錄與管理
- **產品目錄**：完整的產品與服務目錄管理
- **報價單管理**：快速生成專業報價單，支援多種格式匯出
- **資料庫備份**：自動化資料備份與排程，確保數據安全
- **多語言支援**：系統介面支援繁體中文，可輕鬆擴展支援其他語言
- **響應式設計**：適配桌面和移動設備的使用者介面

## 技術架構

- **後端框架**：Node.js + Express.js
- **資料庫**：SQLite
- **前端技術**：Bootstrap, jQuery, EJS 模板引擎
- **第三方庫**：
  - archiver (檔案壓縮)
  - node-cron (排程任務)
  - multer (檔案上傳處理)
  - express-session (會話管理)
  - date-fns (日期處理)

## 系統需求

- Node.js (建議版本 14.x 或更高)
- 操作系統：Windows, macOS 或 Linux
- 至少 512MB 的可用記憶體
- 100MB 以上的可用硬碟空間

## 安裝指南

1. **下載源碼**：
   ```bash
   git clone https://github.com/yourusername/quotation-management-system.git
   cd quotation-management-system
   ```

2. **安裝依賴**：
   ```bash
   npm install
   ```

3. **設定環境變數**：
   - 複製 `.env.example` 文件為 `.env`
   - 根據需要修改 `.env` 中的設定

4. **啟動系統**：
   ```bash
   npm start
   ```

5. **訪問系統**：
   - 打開瀏覽器，訪問 `http://localhost:3000`
   - 使用預設管理員帳號登入：
     - 帳號：admin
     - 密碼：admin123

## 功能詳解

### 1. 用戶管理

- **用戶註冊**：新用戶可自行註冊帳號
- **用戶登入**：安全的登入機制，支援「記住我」功能
- **忘記密碼**：透過電子郵件重設密碼
- **權限控制**：管理員可分配不同權限給用戶
- **個人資料管理**：用戶可管理個人資訊與偏好設定

### 2. 客戶管理

- **客戶資訊記錄**：完整的客戶基本資料
- **聯絡人管理**：多聯絡人記錄與通訊記錄
- **客戶分類**：靈活的分類與標籤功能
- **批量匯入**：支援從 CSV 檔案批量匯入客戶資料
- **匯出功能**：將客戶資料匯出為多種格式

### 3. 產品管理

- **產品目錄**：詳細的產品描述與分類
- **價格管理**：支援多種價格策略和折扣設定
- **庫存追蹤**：基礎庫存數量追蹤功能
- **批量操作**：批量新增、編輯和刪除產品
- **產品匯入/匯出**：支援 CSV 格式匯入與匯出

### 4. 報價管理

- **快速報價**：直覺式報價單生成介面
- **模板系統**：可自訂的報價單模板
- **自動計算**：自動計算小計、總額和稅額
- **報價歷史**：完整的報價歷史記錄
- **匯出功能**：支援 PDF、CSV 等格式匯出
- **報價狀態追蹤**：從建立到接受的報價流程管理

### 5. 資料庫備份功能

- **手動備份**：一鍵創建資料庫壓縮備份
- **自動排程備份**：設定定時備份任務
  - 支援每天、每週、每月定時備份
  - 可自訂執行時間
  - 支援指定每週特定日期或每月特定日期執行
- **備份管理**：
  - 查看所有備份歷史
  - 下載備份檔案
  - 刪除不需要的備份
- **備份排程管理**：
  - 創建多個備份計劃
  - 編輯現有排程
  - 啟用/停用排程
  - 立即執行排程任務
- **備份壓縮**：自動將資料庫檔案壓縮為 ZIP 格式，節省存儲空間

## 管理員功能

### 系統設定

- **基本設定**：系統名稱、標誌等基本設定
- **郵件設定**：配置發送電子郵件的 SMTP 伺服器
- **用戶權限**：管理用戶權限與角色
- **備份設定**：配置備份儲存位置與保留策略

### 資料備份與還原

1. **創建資料庫備份**：
   - 訪問「資料庫備份」頁面
   - 點擊「立即備份」按鈕
   - 可以選擇添加備份說明
   - 系統會在背景完成資料庫壓縮與備份

2. **設定自動備份排程**：
   - 訪問「資料庫備份」頁面
   - 在「定時備份排程設置」區域設定：
     - 排程名稱：為排程取一個唯一標識名稱
     - 備份頻率：選擇每天、每週或每月
     - 執行時間：選擇一天中的具體時間點
     - 對於每週任務：指定在星期幾執行
     - 對於每月任務：指定在每月哪一天執行
   - 點擊「建立排程」按鈕儲存設定

3. **管理備份檔案**：
   - 檢視所有備份列表
   - 下載備份檔案進行存檔
   - 刪除不需要的舊備份

## 常見問題

### 資料備份相關

**Q: 備份檔案存儲在哪裡？**
A: 備份檔案預設存儲在系統的 `backups` 目錄下，以 ZIP 格式儲存。

**Q: 如何自動清理舊的備份檔案？**
A: 目前需要手動清理舊備份。未來計劃增加自動清理功能，根據時間或數量自動刪除舊備份。

**Q: 備份檔案包含哪些內容？**
A: 備份檔案包含完整的 SQLite 資料庫檔案，含所有系統數據。

**Q: 如何還原備份？**
A: 目前需手動還原。請停止系統，將備份的資料庫檔案解壓後替換 `database` 目錄下的資料庫檔案，然後重新啟動系統。

### 系統使用相關

**Q: 忘記管理員密碼怎麼辦？**
A: 可以使用「忘記密碼」功能重設，或直接修改資料庫中的密碼記錄。

**Q: 如何變更系統語言？**
A: 目前系統僅支援繁體中文，未來將添加多語言支援。

**Q: 系統支援多少用戶同時使用？**
A: 系統理論上可支援數十名用戶同時使用，具體取決於伺服器配置。

## 未來功能規劃

- 還原備份的用戶介面
- 自動清理舊備份機制
- 客戶互動記錄功能
- 更多報表與分析功能
- 行動應用程式支援

## 授權與支援

本系統採用 MIT 授權。如需技術支援或客製化開發，請聯繫開發團隊。

---

© 2025 報價管理系統團隊。保留所有權利。 