# 報價管理系統

這是一個基於 Web 的報價管理系統，用於幫助企業管理客戶、產品、服務和報價流程。系統具有完善的用戶權限管理、報價單生成和管理、客戶資料管理以及產品目錄管理功能。

## 系統特點

- **用戶管理**：管理員可以創建和管理用戶帳號，分配不同的角色和權限
- **客戶管理**：存儲和管理客戶資料，包括聯絡人、地址和交易歷史
- **產品管理**：建立和維護產品目錄，設定價格和詳細描述
- **報價單管理**：創建、編輯和追蹤報價單，支持多種折扣和稅率計算
- **報表功能**：生成各種業務報表，幫助分析銷售和客戶數據
- **多語言支持**：系統可以設定不同的語言偏好
- **個人化界面**：用戶可以自定義界面主題和佈局
- **安全認證**：完整的用戶認證和授權系統，包括密碼重置功能

## 技術堆疊

- **後端**：Node.js + Express.js
- **前端**：HTML5, CSS3, Bootstrap 5, JavaScript
- **視圖引擎**：EJS (Embedded JavaScript)
- **數據庫**：SQLite
- **認證**：自定義 Session 管理
- **其他工具**：Nodemailer（郵件發送）

## 系統需求

- Node.js v14.0.0 或更高版本
- NPM v6.0.0 或更高版本

## 安裝指南

1. 克隆存儲庫：
   ```bash
   git clone https://github.com/your-username/WEB-based-Quotation-Management-System-v3.git
   cd WEB-based-Quotation-Management-System-v3
   ```

2. 安裝依賴：
   ```bash
   npm install
   ```

3. 創建環境變數文件（.env）：
   ```
   PORT=3000
   NODE_ENV=development
   SESSION_SECRET=your-session-secret
   DB_PATH=./database/quotation.sqlite
   APP_NAME=報價管理系統
   
   # 電子郵件設置
   EMAIL_ENABLED=false
   EMAIL_SERVICE=Gmail
   EMAIL_USER=your-email@gmail.com
   EMAIL_PASSWORD=your-app-password
   ```

4. 啟動應用：
   ```bash
   npm start
   ```

5. 在瀏覽器中訪問：
   ```
   http://localhost:3000
   ```

## 初始管理員帳號

首次啟動系統時，將自動創建以下管理員帳號：
- 用戶名：admin
- 密碼：admin123

**重要**：首次登入後請立即修改此默認密碼！

## 系統配置

### 數據庫配置
系統使用 SQLite 數據庫，默認位置為 `./database/quotation.sqlite`。您可以通過修改 `.env` 文件中的 `DB_PATH` 變量來更改數據庫文件的位置。

### 電子郵件配置
要啟用密碼重設功能的電子郵件發送，請按照以下步驟操作：

1. 將 `.env` 文件中的 `EMAIL_ENABLED` 設為 `true`
2. 設置 `EMAIL_SERVICE`（例如：Gmail）
3. 提供有效的 `EMAIL_USER` 和 `EMAIL_PASSWORD`

如果使用 Gmail，您需要使用應用程式密碼而非普通密碼。

## 主要功能說明

### 用戶管理
- 創建新用戶
- 編輯用戶資料
- 重設用戶密碼
- 管理用戶權限
- 個人資料和偏好設定

### 客戶管理
- 添加新客戶
- 編輯客戶資訊
- 上傳客戶相關文件
- 查看客戶交易歷史
- 批量導入客戶數據

### 產品管理
- 添加產品和服務
- 設定產品類別
- 管理產品價格
- 批量導入產品

### 報價單管理
- 創建新報價單
- 編輯現有報價單
- 設定折扣和稅率
- 導出為 PDF
- 通過電子郵件發送報價單
- 追蹤報價單狀態

### 報表功能
- 銷售報表
- 客戶報表
- 產品報表
- 自定義日期範圍報表

## 系統角色和權限

系統有兩種主要角色：

### 管理員 (admin)
- 可以管理所有用戶、客戶、產品和報價單
- 可以查看所有報表
- 可以配置系統設定

### 一般用戶 (user)
- 可以管理客戶資料
- 可以查看產品目錄
- 可以創建和管理報價單
- 可以查看受限的報表
- 可以管理個人資料和偏好設定

## 密碼重設流程

1. 在登入頁面點擊"忘記密碼?"
2. 輸入註冊時使用的電子郵件地址
3. 系統將發送包含重設連結的電子郵件
   - 在開發環境中（EMAIL_ENABLED=false），連結會顯示在控制台日誌中
4. 點擊重設連結（有效期為 1 小時）
5. 設置新密碼
6. 使用新密碼登入系統

## 常見問題解答

**Q: 如何備份數據？**  
A: 只需複製 `./database` 目錄中的 SQLite 文件即可。建議定期進行備份。

**Q: 如何重設密碼？**  
A: 管理員可以為其他用戶重設密碼，或者用戶可以使用忘記密碼功能自行重設。

**Q: 上傳的文件存儲在哪裡？**  
A: 上傳的文件存儲在 `./uploads` 目錄中。

## 開發者信息

本系統基於 MIT 許可證開源，歡迎貢獻和改進。

## 許可證

[MIT License](LICENSE) 